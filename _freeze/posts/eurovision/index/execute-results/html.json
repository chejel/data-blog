{
  "hash": "e3e5dd86c10a04d6bd3b66a9366444bd",
  "result": {
    "markdown": "---\ntitle: \"A Eurovision History\"\nauthor: \"\"\ndate: \"2022-06-01\"\ndescription: \"A look into the dataset reveals how the song competition has changed in the more than 65-year duration.\"\ncategories: [ \"Tidy Tuesday\", R ]\nimage: \"eurovision-thumbnail.png\"\nimage-alt: \"\"\n#format:\n  #html:\n    #code-fold: true\n    #code-summary: \"Show code\"\neditor_options: \n  chunk_output_type: console\n---\n\n\n![Final result: See full chart below.](eurovision-featured.png){fig-alt=\"Participant countries of Eurovision listed down the y-axis with the years on the x-axis to show the top and bottom 3 placements each year.\"}\n\n::: {.callout-note collapse=\"true\"}\n## What is #TidyTuesday?\n\n[Tidy Tuesday](https://github.com/rfordatascience/tidytuesday) is a weekly project that provides a dataset for R users to explore and visualize. On May 17, 2022, it featured a [Eurovision dataset](https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-05-17/readme.md).\n:::\n\n\n::: {.cell}\n\n:::\n\n\n## Exploring the dataset\n\n::: {.callout-note collapse=\"true\"}\n## An American attempts to explain Eurovision\nEvery year, more than 40 countries across Europe, and from other continents, participate in the Eurovision Song Contest, a continent (and beyond)-wide extravaganza complete with sparkles and <a href=\"https://www.youtube.com/watch?v=gAh9NRGNhUU\" target=\"_blank\">Hard Rock Hallelujah</a>. In the case of the dataset, it lists every artist and song performed on the show since the inaugural show in 1956. The competition has been held annually since then, except in 2020.\n:::\n\nA bit of wrangling of this dataset can give some insight into how the history of the competition and how it has changed through the decades to include more countries. Here's a glimpse of the original dataset:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(eurovision)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,005\nColumns: 18\n$ event          <chr> \"Turin 2022\", \"Turin 2022\", \"Turin 2022\", \"Turin 2022\",‚Ä¶\n$ host_city      <chr> \"Turin\", \"Turin\", \"Turin\", \"Turin\", \"Turin\", \"Turin\", \"‚Ä¶\n$ year           <dbl> 2022, 2022, 2022, 2022, 2022, 2022, 2022, 2022, 2022, 2‚Ä¶\n$ host_country   <chr> \"Italy\", \"Italy\", \"Italy\", \"Italy\", \"Italy\", \"Italy\", \"‚Ä¶\n$ event_url      <chr> \"https://eurovision.tv/event/turin-2022\", \"https://euro‚Ä¶\n$ section        <chr> \"first-semi-final\", \"first-semi-final\", \"first-semi-fin‚Ä¶\n$ artist         <chr> \"Kalush Orchestra\", \"S10\", \"Amanda Georgiadi Tenfjord\",‚Ä¶\n$ song           <chr> \"Stefania\", \"De Diepte\", \"Die Together\", \"Saudade, Saud‚Ä¶\n$ artist_url     <chr> \"https://eurovision.tv/participant/kalush-orchestra-22\"‚Ä¶\n$ image_url      <chr> \"https://static.eurovision.tv/hb-cgi/images/963164d0-06‚Ä¶\n$ artist_country <chr> \"Ukraine\", \"Netherlands\", \"Greece\", \"Portugal\", \"Bulgar‚Ä¶\n$ country_emoji  <chr> \":flag_ua:\", \":flag_nl:\", \":flag_gr:\", \":flag_pt:\", \":f‚Ä¶\n$ running_order  <dbl> 6, 8, 15, 10, 7, 5, 17, 16, 3, 9, 4, 14, 11, 1, 12, 2, ‚Ä¶\n$ total_points   <dbl> 337, 221, 211, 208, 29, 15, 187, 177, 159, 154, 118, 10‚Ä¶\n$ rank           <dbl> 1, 2, 3, 4, 16, 17, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, ‚Ä¶\n$ rank_ordinal   <chr> \"1st\", \"2nd\", \"3rd\", \"4th\", \"16th\", \"17th\", \"5th\", \"6th‚Ä¶\n$ qualified      <lgl> TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, TRUE, TRUE, TRUE,‚Ä¶\n$ winner         <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,‚Ä¶\n```\n:::\n:::\n\n\nTo start off, how many countries have participated each year?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# divide up years on x-axis by decades\ndecade_breaks <- c(1960,1970,1980,1990,2000,2010,2020)\n\neurovision %>%\n  select(year, artist_country) %>%\n  distinct() %>%\n  count(year) %>%\n  ggplot(aes(x=year, y=n)) + \n  geom_col(fill=\"#F7C04A\", color=\"black\", size=0.25, alpha=0.6, width=1, show.legend=FALSE) +\n  scale_x_continuous(limits=c(1955,2023),\n                     breaks=decade_breaks,\n                     expand=c(0, 0)) +\n  scale_y_continuous(expand=c(0, 0), limits=c(0, 45)) +\n  theme_minimal() +\n  theme(plot.title = element_text(family=\"DM Serif Display\", size=rel(1.75)),\n        plot.title.position = \"plot\",\n        legend.position = \"top\", \n        legend.justification = \"left\",\n        legend.direction = \"horizontal\",\n        legend.background = element_rect(fill=\"#fff7f5\", color=NA),\n        legend.text = element_text(margin=margin(r=0.28, unit=\"cm\"), size=10),\n        legend.box.margin = margin(c(0,0,0,-77)),\n        text = element_text(family=\"Trade Gothic LT Std\", color=\"#313131\"),\n        plot.caption = element_textbox_simple(color=\"#666666\"),\n        axis.title = element_text(size=rel(0.75), color=\"#525E75\"),\n        panel.grid.minor.x = element_blank(),\n        panel.grid.major.x = element_blank(),\n        panel.grid.minor.y = element_line(size=0.15),\n        panel.grid.major.y = element_line(size=0.2)) +\n  labs(title=\"Eurovision: Number of Participating Countries by Year\",\n       caption=NULL,\n       x=\"Year\",\n       y=\"Number of countries\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\n‚Ñπ Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.\n‚Ñπ Please use the `linewidth` argument instead.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n<br />\nNote: While the competition was not held in 2020, the list of participants had already been determined. Also, what happened in 1970?[^1]\n\n[^1]: A \"[voting scandal](https://eurovision.tv/event/amsterdam-1970)\" the year before.\n\nEach row of the dataset includes, among other details, the year, song and singer, as well as the stage of the competition in which the performance took place. A look into the data reveals how over the years, the contest has expanded to include more countries, which in turn led to multiple segments of the eshow.\n\nWhich years had which segments?\n\n::: {.cell}\n\n```{.r .cell-code}\neurovision %>%\n  # keep only select variables\n  select(host_city, year, host_country, section) %>%\n  distinct() %>%\n  # combine sections (ex. merge \"semi-final\" and \"grand-final\" rows that are in the same year into \"semi-final, grand-final\")\n  group_by(year) %>% \n  mutate(sections = paste0(section, collapse = \", \")) %>%\n  # How many of each type of combination of competition sections?\n  count(sections) %>% \n  ungroup() %>%\n  group_by(sections) %>%\n  # for each section, get the earliest and latest year to get range\n  summarize(first_year = min(year), last_year = max(year)) %>%\n  # sort by earliest year\n  arrange(first_year) %>% \n  select(Sections=sections, `Earliest year`=first_year, `Latest year`=last_year) %>%\n  kable()\n```\n\n::: {.cell-output-display}\n|Sections                                         | Earliest year| Latest year|\n|:------------------------------------------------|-------------:|-----------:|\n|final                                            |          1956|        2003|\n|semi-final, grand-final                          |          2004|        2007|\n|first-semi-final, second-semi-final, grand-final |          2008|        2022|\n:::\n:::\n\n<br />\n**Results**: For nearly 50 years, the competition included only one level, the \"final\" show. In 2004, following an influx of new participating countries, organizers introduced the semi-final stage, the top 10 of which proceeded to the final ‚Äì along with the top 10 from the 2003 final, the host country and the five automatically qualifying countries of France, Germany, Italy, Spain and the UK. \n\nIn 2008, the competition started holding two simultaneous semi-finals with qualifiers from each section (along with üá´üá∑  üá©üá™ üáÆüáπ üá™üá∏ üá¨üáß and the host country) making up the finalists.[^2] \n\n[^2]: Source: [Eurovision.tv](https://eurovision.tv/history/in-a-nutshell)\n\nAs evident in the dataset, only in 1956 did each of the participating countries (seven at the time) have two performances, either performed by the same or different people, with only two rankings in the end: One entry, representing the host country of Switzerland, (Lys Assia performing Refrain) placed first while the other 13 performances placed \"second,\" at least in the sense that ranked results beyond the winner were not announced.\n\n\n::: {.cell}\n\n```{.r .cell-code}\neurovision %>%\n  filter(year==1956) %>%\n  arrange(rank) %>%\n  select(Artist=artist, Song=song, `Artist's Country`=artist_country, Rank=rank) %>%\n  kable()\n```\n\n::: {.cell-output-display}\n|Artist                 |Song                            |Artist's Country | Rank|\n|:----------------------|:-------------------------------|:----------------|----:|\n|Lys Assia              |Refrain                         |Switzerland      |    1|\n|Tonina Torielli        |Amami Se Vuoi                   |Italy            |    2|\n|Mich√®le Arnaud         |Les Amants De Minuit            |Luxembourg       |    2|\n|Dany Dauberson         |Il Est L√†                       |France           |    2|\n|Freddy Quinn           |So Geht Das Jede Nacht          |Germany          |    2|\n|Mony Marc              |Le Plus Beau Jour De Ma Vie     |Belgium          |    2|\n|Corry Brokken          |Voorgoed Voorbij                |Netherlands      |    2|\n|Franca Raimondi        |Aprite Le Finestre              |Italy            |    2|\n|Mich√®le Arnaud         |Ne Crois Pas                    |Luxembourg       |    2|\n|Math√© Alt√©ry           |Le Temps Perdu                  |France           |    2|\n|Walter Andreas Schwarz |Im Wartesaal Zum Gro√üen Gl√ºck   |Germany          |    2|\n|Fud Leclerc            |Messieurs Les Noy√©s De La Seine |Belgium          |    2|\n|Lys Assia              |Das Alte Karussell              |Switzerland      |    2|\n|Jetty Paerl            |De Vogels Van Holland           |Netherlands      |    2|\n:::\n:::\n\n\n\n## Visualization\n\nThe visualization will include only the countries that have made it to at least one final stage of a competition. I have manipulated the data accordingly. Here's a random sample of the result:\n\n::: {.cell}\n\n```{.r .cell-code}\neurovision_plot <- eurovision %>%\n  select(year, section, artist_country, rank) %>%\n  distinct() %>%\n  # narrow down to winners and non-winners\n  filter(section==\"final\" | section==\"grand-final\") %>%\n  group_by(year) %>%\n  arrange(rank) %>%\n  # remove non-winners of 1956 as other ranks were not specified\n  filter(!(year==1956 & rank==1)) %>% \n  arrange(-year) %>% # order by most recent\n  # assign placement to make it easier to assign color\n  mutate(rank_text = case_when(\n    rank==1 ~ \"First\",\n    rank==2 ~ \"Second\",\n    rank==3 ~ \"Third\",\n    rank==max(rank)-2 ~ \"Bottom 3\",\n    rank==max(rank)-1 ~ \"Bottom 3\",\n    rank==max(rank) ~ \"Bottom 3\")) %>%\n  ungroup() %>%\n  select(artist_country, year, rank, rank_text) %>% \n  arrange(artist_country)\n\neurovision_plot %>% \n  select(Country=artist_country, Year=year, Rank=rank, `Rank group`=rank_text) %>%\n  sample_n(5) %>%\n  kable()\n```\n\n::: {.cell-output-display}\n|Country     | Year| Rank|Rank group |\n|:-----------|----:|----:|:----------|\n|Germany     | 1970|    3|Third      |\n|Cyprus      | 2012|   16|NA         |\n|Netherlands | 1994|   23|Bottom 3   |\n|Belgium     | 1986|    1|First      |\n|Greece      | 2014|   20|NA         |\n:::\n:::\n\n<br />\n\nAre there any countries that never made it to a final stage?\n\n::: {.cell}\n\n```{.r .cell-code}\nsetdiff(eurovision$artist_country, eurovision_plot$artist_country) %>%\n  sort() %>% # alphabetize\n  paste0(., collapse = \", \") # transform to single element of countries separated by commas that can be selected and copied into the ggplot code\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Andorra\"\n```\n:::\n:::\n\n\nHere is the visualization:\n\n::: {.cell .column-body-outset}\n\n```{.r .cell-code}\nshapes <- c(\"First\"=24, \"Second\"=24, \"Third\"=24, \"Bottom 3\"=25)\n\nrank_colors <- c(\"First\"=\"#FFC600\", \"Second\"=\"#73777B\", \"Third\"=\"#AD7A54\", \"Bottom 3\" = \"#E83A14\")\n\ny_limits <- c(1955,2023)\n\ny_breaks <- seq(1956,2022,2)\n\nplot_theme <- theme(text = element_text(family = \"IBM Plex Sans\", color = \"#383838\"),\n          axis.text.y = element_text(size=rel(0.8)),\n          axis.text.x = element_text(family=\"DM Serif Display\", size=rel(1.25)),\n          plot.title = element_text(family=\"DM Serif Display\", size=rel(1.5), hjust = 0.5),\n          plot.title.position = \"plot\",\n          plot.subtitle = element_textbox_simple(color = \"#383838\", hjust = 0.5, size=rel(0.8)),\n          plot.caption = element_textbox_simple(color = \"#818181\", size=rel(0.7)),\n          # legend\n          legend.position = \"top\", \n          legend.justification = \"left\",\n          legend.direction = \"horizontal\",\n          #legend.box.margin = margin(c(-5,0,-10,-115)),\n          legend.text = element_text(margin = margin(r = 0.4, unit = 'cm'), size=rel(0.7)),\n          legend.title = element_blank(),\n          legend.background = element_blank(),\n          legend.key = element_blank(), # color around symbol in legend\n          # lines for countries\n          panel.grid.major.y = element_line(size = 0.2, color = \"#383838\"),\n          axis.ticks.y = element_line(size = 0.2, color = \"#383838\"),\n          # lines for labeled years\n          panel.grid.major.x = element_line(size = 0.25, color = \"#847e7e\", linetype = 2),\n          panel.grid.minor.x = element_line(size = 0.2, color = \"#b7b2b2\", linetype = 2), #e0dede\n          axis.ticks.x = element_line(size = 0.25, color = \"#847e7e\"),\n          panel.background = element_blank(),\n          plot.background = element_rect(fill = \"transparent\", color = NA)) \n\neurovision_earliest_yr <- eurovision %>%\n  # create df of when country joined\n  select(year, section, artist_country) %>%\n  group_by(artist_country) %>%\n  summarize(earliest_yr = min(year)) %>%\n  # create character vector of just color numbers in same order as unique list of the countries\n  right_join(eurovision_plot)\n\neurovision_earliest_yr %>%\n  mutate(country_year = paste0(\"<strong>\",artist_country,\"</strong> <span style='color:#818181; font-size: 8px;'>\", earliest_yr, \"</span>\")) %>%\n  mutate(country_year = fct_rev(country_year)) %>%\n  ggplot(aes(x=country_year, y=year, fill=rank_text), color=\"white\") +\n  geom_point(aes(shape=rank_text), color=\"transparent\", size=1.5) +\n  scale_shape_manual(values=shapes) +\n  scale_fill_manual(values=rank_colors) +\n  scale_y_continuous(limits=y_limits,\n                     breaks=decade_breaks,\n                     minor_breaks=y_breaks,\n                     expand = c(0, 0),\n                     position=\"right\") +\n  plot_theme +\n  theme(axis.text.y = element_markdown()) +\n  coord_flip() +\n  annotate(\"rect\",\n           ymin = -Inf,\n           ymax = 2003,\n           xmin = -Inf,\n           xmax = Inf,\n           fill = \"#D7E9B9\", alpha = 0.3) +\n  annotate(\"rect\",\n           ymin = 2003,\n           ymax = 2007,\n           xmin = -Inf,\n           xmax = Inf,\n           fill = \"#FFD495\", alpha = 0.3) +\n  annotate(\"rect\",\n           ymin = 2007,\n           ymax = Inf,\n           xmin = -Inf,\n           xmax = Inf,\n           fill = \"#FAAB78\", alpha = 0.3) +\n  labs(title=\"Eurovision: Top and Bottom 3\",\n         subtitle=\"<br />From <span style='color: #5e842c;'>1956 through 2003, the contest only had a final round</span> whereas from <span style='color: #fd9d3a;'>2004 to 2007, the competition introduced an additional semi-final round</span>. Since <span style='color: #e54111;'>2008, Eurovision has had two simultaneous semi-finals</span> in addition to the grand final.\",\n         caption=\"<br />A ranking may include multiple countries. The inaugural competition in 1956 was not included due to only the winner being announced (Switzerland).\",\n         x=NULL, y=NULL)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=100%}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}