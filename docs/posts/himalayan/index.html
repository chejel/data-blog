<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2020-10-20">
<meta name="description" content="Visualizing a #TidyTuesday-featured dataset on Himalayan expeditions, with a focus on climber nationalities.">

<title>Jennifer Cheng - Himalayan Expeditions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.27/datatables.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Jennifer Cheng</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://chejel.github.io/portfolio">
 <span class="menu-text">Work</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:chejenj@gmail.com"><i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/chejel"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Himalayan Expeditions</h1>
                  <div>
        <div class="description">
          Visualizing a #TidyTuesday-featured dataset on Himalayan expeditions, with a focus on climber nationalities.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Tidy Tuesday</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 20, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#seasons-and-decades" id="toc-seasons-and-decades" class="nav-link active" data-scroll-target="#seasons-and-decades">Seasons and decades</a></li>
  <li><a href="#trips-by-decades" id="toc-trips-by-decades" class="nav-link" data-scroll-target="#trips-by-decades">Trips by decades</a></li>
  <li><a href="#age-factor" id="toc-age-factor" class="nav-link" data-scroll-target="#age-factor">Age factor</a></li>
  <li><a href="#women-climbers" id="toc-women-climbers" class="nav-link" data-scroll-target="#women-climbers">Women Climbers</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<figure class="figure">
<img src="./himalayan-featured.png" alt="Stacked bar chart showing frequency of trips taken by seasons over the decades" width="650" class="figure-img">
<figcaption class="figure-caption">
See full chart below.
</figcaption>
</figure>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
What is #TidyTuesday?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><a href="https://github.com/rfordatascience/tidytuesday">Tidy Tuesday</a> is a weekly project that provides a dataset for R users to explore and visualize. On September 22, 2020, it <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-09-22/readme.md">featured data</a> from <a href="https://www.himalayandatabase.com/">The Himalayan Database</a>, which contains information on expeditions from 1905 through spring 2019 (the online database itself goes up to spring 2021) that scaled more than 465 major peaks in the Nepal Himalayas.</p>
</div>
</div>
</div>
<p>According to the Himalayan Database:</p>
<blockquote class="blockquote">
<p>The database is based on the expedition archives of Elizabeth Hawley, a longtime journalist based in Kathmandu, and it is supplemented by information gathered from books, alpine journals and correspondence with Himalayan climbers.<br>
(…)<br>
Each expedition record contains detailed information including dates, routes, camps, use of supplemental oxygen, successes, deaths and accidents.</p>
<p>Each expedition record contains biographical information for all members listed on the permit as well as for hired members (e.g., Sherpas) for which there are significant events such as a summit success, death, accident or rescue.</p>
</blockquote>
<p>This post shows the exploration process of two of the datasets, and uses the <code>tidyverse</code> set of R packages for data wrangling and visualization.</p>
<p>Starting out with an overview of the records:</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(expeditions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 10,364
Columns: 16
$ expedition_id      &lt;chr&gt; "ANN260101", "ANN269301", "ANN273101", "ANN278301",…
$ peak_id            &lt;chr&gt; "ANN2", "ANN2", "ANN2", "ANN2", "ANN2", "ANN2", "AN…
$ peak_name          &lt;chr&gt; "Annapurna II", "Annapurna II", "Annapurna II", "An…
$ year               &lt;dbl&gt; 1960, 1969, 1973, 1978, 1979, 1980, 1980, 1981, 198…
$ season             &lt;chr&gt; "Spring", "Autumn", "Spring", "Autumn", "Autumn", "…
$ basecamp_date      &lt;date&gt; 1960-03-15, 1969-09-25, 1973-03-16, 1978-09-08, NA…
$ highpoint_date     &lt;date&gt; 1960-05-17, 1969-10-22, 1973-05-06, 1978-10-02, 19…
$ termination_date   &lt;date&gt; NA, 1969-10-26, NA, 1978-10-05, 1979-10-20, 1980-0…
$ termination_reason &lt;chr&gt; "Success (main peak)", "Success (main peak)", "Succ…
$ highpoint_metres   &lt;dbl&gt; 7937, 7937, 7937, 7000, 7160, 7000, 7250, 6400, 740…
$ members            &lt;dbl&gt; 10, 10, 6, 2, 3, 6, 7, 19, 9, 5, 5, 5, 6, 4, 3, 4, …
$ member_deaths      &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, …
$ hired_staff        &lt;dbl&gt; 9, 0, 8, 0, 0, 2, 2, 0, 3, 0, 0, 3, 4, 2, 0, 2, 5, …
$ hired_staff_deaths &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ oxygen_used        &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
$ trekking_agency    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "Kunga"…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(members)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 76,519
Columns: 21
$ expedition_id        &lt;chr&gt; "AMAD78301", "AMAD78301", "AMAD78301", "AMAD78301…
$ member_id            &lt;chr&gt; "AMAD78301-01", "AMAD78301-02", "AMAD78301-03", "…
$ peak_id              &lt;chr&gt; "AMAD", "AMAD", "AMAD", "AMAD", "AMAD", "AMAD", "…
$ peak_name            &lt;chr&gt; "Ama Dablam", "Ama Dablam", "Ama Dablam", "Ama Da…
$ year                 &lt;dbl&gt; 1978, 1978, 1978, 1978, 1978, 1978, 1978, 1978, 1…
$ season               &lt;chr&gt; "Autumn", "Autumn", "Autumn", "Autumn", "Autumn",…
$ sex                  &lt;chr&gt; "M", "M", "M", "M", "M", "M", "M", "M", "M", "M",…
$ age                  &lt;dbl&gt; 40, 41, 27, 40, 34, 25, 41, 29, 35, 37, 23, 44, 2…
$ citizenship          &lt;chr&gt; "France", "France", "France", "France", "France",…
$ expedition_role      &lt;chr&gt; "Leader", "Deputy Leader", "Climber", "Exp Doctor…
$ hired                &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ highpoint_metres     &lt;dbl&gt; NA, 6000, NA, 6000, NA, 6000, 6000, 6000, NA, 681…
$ success              &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ solo                 &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ oxygen_used          &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ died                 &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ death_cause          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ death_height_metres  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ injured              &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ injury_type          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ injury_height_metres &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</code></pre>
</div>
</div>
<p>Given that each record is of a member of an expedition, how many different expeditions occurred, according to the datasets?</p>
<p>For <code>expeditions</code>, will each row be a unique expedition?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>expeditions <span class="sc">%&gt;%</span> <span class="fu">count</span>(expedition_id, <span class="at">sort=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,363 × 2
   expedition_id     n
   &lt;chr&gt;         &lt;int&gt;
 1 KANG10101         2
 2 ACHN15301         1
 3 ACHN15302         1
 4 ACHN18301         1
 5 AMAD00101         1
 6 AMAD00102         1
 7 AMAD00103         1
 8 AMAD00104         1
 9 AMAD00105         1
10 AMAD00106         1
# … with 10,353 more rows</code></pre>
</div>
</div>
<p>Since <code>KANG10101</code> appears twice, how do those rows appear?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>expeditions <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(expedition_id<span class="sc">==</span><span class="st">"KANG10101"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">dom =</span> <span class="st">'t'</span>, <span class="at">scrollX =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8d0fe7d584c8dc31de8b" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8d0fe7d584c8dc31de8b">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["KANG10101","KANG10101"],["KANG","KANG"],["Kangchenjunga","Kangchenjunga"],[1910,2010],["Spring","Spring"],[null,"2010-03-24"],[null,"2010-04-29"],[null,"2010-05-01"],["Did not attempt climb","Success (main peak)"],[null,8586],[1,4],[0,0],[0,2],[0,0],[false,true],[null,"Windhorse Trekking"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>expedition_id<\/th>\n      <th>peak_id<\/th>\n      <th>peak_name<\/th>\n      <th>year<\/th>\n      <th>season<\/th>\n      <th>basecamp_date<\/th>\n      <th>highpoint_date<\/th>\n      <th>termination_date<\/th>\n      <th>termination_reason<\/th>\n      <th>highpoint_metres<\/th>\n      <th>members<\/th>\n      <th>member_deaths<\/th>\n      <th>hired_staff<\/th>\n      <th>hired_staff_deaths<\/th>\n      <th>oxygen_used<\/th>\n      <th>trekking_agency<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"columnDefs":[{"className":"dt-right","targets":[4,10,11,12,13,14]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>They are indeed two different expeditions, a century apart. How many other expeditions have missing values? I’ll use a function from the <code>[naniar](https://naniar.njtierney.com/)</code> package, which shows the number and percentage of missing values for each variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>naniar<span class="sc">::</span><span class="fu">miss_var_summary</span>(expeditions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 3
   variable           n_miss pct_miss
   &lt;chr&gt;               &lt;int&gt;    &lt;dbl&gt;
 1 termination_date     2380 23.0    
 2 trekking_agency      1580 15.2    
 3 basecamp_date        1095 10.6    
 4 highpoint_date        650  6.27   
 5 highpoint_metres      414  3.99   
 6 peak_name               1  0.00965
 7 expedition_id           0  0      
 8 peak_id                 0  0      
 9 year                    0  0      
10 season                  0  0      
11 termination_reason      0  0      
12 members                 0  0      
13 member_deaths           0  0      
14 hired_staff             0  0      
15 hired_staff_deaths      0  0      
16 oxygen_used             0  0      </code></pre>
</div>
</div>
<p>For expeditions without a basecamp date, were the reasons?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>expeditions <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(basecamp_date)) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(termination_reason)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 2
   termination_reason                                                          n
   &lt;chr&gt;                                                                   &lt;int&gt;
 1 Accident (death or serious injury)                                         39
 2 Attempt rumoured                                                           12
 3 Bad conditions (deep snow, avalanching, falling ice, or rock)              47
 4 Bad weather (storms, high winds)                                           54
 5 Did not attempt climb                                                     137
 6 Did not reach base camp                                                    59
 7 Illness, AMS, exhaustion, or frostbite                                     26
 8 Lack (or loss) of supplies or equipment                                     7
 9 Lack of time                                                                1
10 Other                                                                     109
11 Route technically too difficult, lack of experience, strength, or moti…    41
12 Success (claimed)                                                           6
13 Success (main peak)                                                       446
14 Success (subpeak)                                                          20
15 Unknown                                                                    91</code></pre>
</div>
</div>
<p>Though these trips did not happen in the end, they’re still considered expeditions and <code>KANG10101</code> as two distinct expeditions. How does this ID appear in the <code>members</code> dataset? Are the two years present there too? (Yes.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(expedition_id<span class="sc">==</span><span class="st">"KANG10101"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 21
  exped…¹ membe…² peak_id peak_…³  year season sex     age citiz…⁴ exped…⁵ hired
  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;lgl&gt;
1 KANG10… KANG10… KANG    Kangch…  1910 Spring M        41 UK      Leader  FALSE
2 KANG10… KANG10… KANG    Kangch…  2010 Spring M        53 S Korea Leader  FALSE
3 KANG10… KANG10… KANG    Kangch…  2010 Spring M        40 S Korea Climber FALSE
4 KANG10… KANG10… KANG    Kangch…  2010 Spring M        47 S Korea Climber FALSE
5 KANG10… KANG10… KANG    Kangch…  2010 Spring M        30 S Korea Climber FALSE
6 KANG10… KANG10… KANG    Kangch…  2010 Spring M        27 Nepal   H-A Wo… TRUE 
7 KANG10… KANG10… KANG    Kangch…  2010 Spring M        39 Nepal   H-A Wo… TRUE 
# … with 10 more variables: highpoint_metres &lt;dbl&gt;, success &lt;lgl&gt;, solo &lt;lgl&gt;,
#   oxygen_used &lt;lgl&gt;, died &lt;lgl&gt;, death_cause &lt;chr&gt;,
#   death_height_metres &lt;dbl&gt;, injured &lt;lgl&gt;, injury_type &lt;chr&gt;,
#   injury_height_metres &lt;dbl&gt;, and abbreviated variable names ¹​expedition_id,
#   ²​member_id, ³​peak_name, ⁴​citizenship, ⁵​expedition_role</code></pre>
</div>
</div>
<p>Is every expedition listed in <code>expeditions</code> also in <code>members</code>? I’ll use the <code>setdiff()</code> function to see if any IDs from <code>expeditions</code> are not found in <code>members</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(expeditions<span class="sc">$</span>expedition_id, members<span class="sc">$</span>expedition_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ANN186305" "CHEO87301" "DHA149001" "EVER68101" "EVER79102" "GAUR73301"
 [7] "KGUR65101" "MAKA34101" "MANA70301" "YALU65101" "YALU67101" "EVER65102"
[13] "EVER19185"</code></pre>
</div>
</div>
<p>There are 13. Any particular commonalities between those expeditions?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>expeditions_only <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(expeditions<span class="sc">$</span>expedition_id, members<span class="sc">$</span>expedition_id) <span class="co"># creates a character string</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>expeditions <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(expedition_id <span class="sc">%in%</span> expeditions_only)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 16
   exped…¹ peak_id peak_…²  year season basecamp…³ highpoin…⁴ terminat…⁵ termi…⁶
   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;  
 1 ANN186… ANN1    Annapu…  1986 Autumn NA         NA         NA         Did no…
 2 CHEO87… CHEO    Cheo H…  1987 Autumn NA         NA         NA         Did no…
 3 DHA149… DHA1    Dhaula…  1949 Unkno… NA         NA         NA         Attemp…
 4 EVER68… EVER    Everest  1968 Spring NA         NA         NA         Attemp…
 5 EVER79… EVER    Everest  1979 Spring NA         NA         NA         Did no…
 6 GAUR73… GAUR    Gauris…  1973 Autumn NA         NA         NA         Did no…
 7 KGUR65… KGUR    Kang G…  1965 Spring NA         NA         NA         Attemp…
 8 MAKA34… MAKA    Makalu   1934 Spring NA         NA         NA         Did no…
 9 MANA70… MANA    Manaslu  1970 Autumn NA         NA         NA         Did no…
10 YALU65… YALU    Yalung…  1965 Spring NA         NA         NA         Did no…
11 YALU67… YALU    Yalung…  1967 Spring NA         NA         NA         Did no…
12 EVER65… EVER    Everest  1965 Spring NA         NA         NA         Attemp…
13 EVER19… EVER    Everest  2019 Spring NA         2019-05-22 NA         Succes…
# … with 7 more variables: highpoint_metres &lt;dbl&gt;, members &lt;dbl&gt;,
#   member_deaths &lt;dbl&gt;, hired_staff &lt;dbl&gt;, hired_staff_deaths &lt;dbl&gt;,
#   oxygen_used &lt;lgl&gt;, trekking_agency &lt;chr&gt;, and abbreviated variable names
#   ¹​expedition_id, ²​peak_name, ³​basecamp_date, ⁴​highpoint_date,
#   ⁵​termination_date, ⁶​termination_reason</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ANN186305</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The expeditions range from 1924 through the 1980s, and one from 2019. That one from 2019 is the only successful trip (termination date not available possibly due to it occurring after the end date of the dataset timeframe) while the rest were either rumored attempts or climbs that were not attempted, with one expedition not reaching the base camp.</p>
<p>Any IDs found in <code>members</code> but not in <code>expeditions</code>? (No)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(members<span class="sc">$</span>expedition_id, expeditions<span class="sc">$</span>expedition_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<p>Therefore, the number of <em>unique</em> expedition IDs in the <code>members</code> data (which has a total 76,519 rows) should be 13 less than number of <em>unique</em> observations in the <code>expeditions</code> data (which, as found earlier, has 10,364 with one “duplicate” ID).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(expedition_id, <span class="at">sort=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,350 × 2
   expedition_id     n
   &lt;chr&gt;         &lt;int&gt;
 1 EVER88101        99
 2 HIML13308        90
 3 EVER15106        79
 4 EVER08101        76
 5 MANA16304        71
 6 EVER18185        69
 7 EVER73101        68
 8 EVER13181        65
 9 EVER19117        65
10 EVER17110        64
# … with 10,340 more rows</code></pre>
</div>
</div>
<p>Going forward, I’ll focus on the <code>year</code>, <code>season</code>, <code>age</code>, <code>citizenship</code> and <code>gender</code> variables in creating the visualizations. The <code>expedition role</code> specifies the titles of each individuals, with the most commons ones being <code>climber</code>, <code>H-A worker</code>, <code>leader</code>, <code>expedition doctor</code> and <code>deputy leader</code>. In this post all individuals will be referred to as <code>climbers</code>.</p>
<section id="seasons-and-decades" class="level3">
<h3 class="anchored" data-anchor-id="seasons-and-decades">Seasons and decades</h3>
<p>Do the expeditions tend to occur during certain seasons and has that been the case throughout the decades?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>expeditions <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">case_when</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1900"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1909"</span> <span class="sc">~</span> <span class="st">"1900-'09"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1910"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1919"</span> <span class="sc">~</span> <span class="st">"'10-'19"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1920"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1929"</span> <span class="sc">~</span> <span class="st">"'20-'29"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1930"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1939"</span> <span class="sc">~</span> <span class="st">"'30-'39"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1940"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1949"</span> <span class="sc">~</span> <span class="st">"'40-'49"</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1950"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1959"</span> <span class="sc">~</span> <span class="st">"'50-'59"</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1960"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1969"</span> <span class="sc">~</span> <span class="st">"'60-'69"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1970"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1979"</span> <span class="sc">~</span> <span class="st">"'70-'79"</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1980"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1989"</span> <span class="sc">~</span> <span class="st">"'80-'89"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1990"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1999"</span> <span class="sc">~</span> <span class="st">"'90-'99"</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2000"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2009"</span> <span class="sc">~</span> <span class="st">"2000-'09"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2010"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2019"</span> <span class="sc">~</span> <span class="st">" '10-'19 "</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(year, <span class="at">truncated =</span> 2L)) <span class="sc">%&gt;%</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(season <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">season =</span> <span class="fu">factor</span>(season, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Winter"</span>, <span class="st">"Spring"</span>, <span class="st">"Summer"</span>, <span class="st">"Autumn"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">factor</span>(decade, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"1900-'09"</span>, <span class="st">"'10-'19"</span>, <span class="st">"'20-'29"</span>, <span class="st">"'30-'39"</span>, <span class="st">"'40-'49"</span>, <span class="st">"'50-'59"</span>, <span class="st">"'60-'69"</span>, <span class="st">"'70-'79"</span>, <span class="st">"'80-'89"</span>, <span class="st">"'90-'99"</span>, <span class="st">"2000-'09"</span>, <span class="st">" '10-'19 "</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(decade, ..count.., <span class="at">fill =</span> season)) <span class="sc">+</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#4e89ae"</span>, <span class="st">"#fe7171"</span>, <span class="st">"#f0a500"</span>, <span class="st">"#7ea04d"</span>)) <span class="sc">+</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"Winter expeditions</span><span class="sc">\n</span><span class="st">peaked in the '80s"</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="dv">5</span>, <span class="at">y =</span> <span class="dv">1150</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"#4e89ae"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fl">7.5</span>, <span class="at">y =</span> <span class="dv">1140</span>, <span class="at">xend =</span> <span class="fl">8.4</span>, <span class="at">yend =</span> <span class="dv">1140</span>),</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#4e89ae"</span>,</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"In the '80s and '90s,</span><span class="sc">\n</span><span class="st">autumn expeditions</span><span class="sc">\n</span><span class="st">outnumbered those</span><span class="sc">\n</span><span class="st">in the spring"</span>, </span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">7.5</span>, <span class="at">y =</span> <span class="dv">2200</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"#7ea04d"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_linedraw</span>() <span class="sc">+</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="fl">0.28</span>, <span class="at">unit =</span> <span class="st">'cm'</span>), <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="sc">-</span><span class="dv">54</span>)),</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>                   <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Commissioner"</span>),</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>                   <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>                   <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Number of expeditions"</span>,</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Slight Seasonal Shifts Over Decades of Expeditions"</span>,</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Expeditions span 1905-2019"</span>,</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Source: #TidyTuesday | Himalayan Database"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Rather than relying solely on eyeballing the seasonal proportions, here are the actual percentages listed in tabular form (using the <a href="https://rstudio.github.io/DT/">DT package</a>). Now it’s clear more spring expeditions occurred in every decade except for the 1980s and 1990s, during which the autumn months dominated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>expeditions <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">case_when</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1900"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1909"</span> <span class="sc">~</span> <span class="st">"1900-1909"</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1910"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1919"</span> <span class="sc">~</span> <span class="st">"1910-1919"</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1920"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1929"</span> <span class="sc">~</span> <span class="st">"1920-1929"</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1930"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1939"</span> <span class="sc">~</span> <span class="st">"1930-1939"</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1940"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1949"</span> <span class="sc">~</span> <span class="st">"1940-1949"</span>,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1950"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1959"</span> <span class="sc">~</span> <span class="st">"1950-1959"</span>,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1960"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1969"</span> <span class="sc">~</span> <span class="st">"1960-1969"</span>,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1970"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1979"</span> <span class="sc">~</span> <span class="st">"1970-1979"</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1980"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1989"</span> <span class="sc">~</span> <span class="st">"1980-1989"</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1990"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1999"</span> <span class="sc">~</span> <span class="st">"1990-1999"</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2000"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2009"</span> <span class="sc">~</span> <span class="st">"2000-2009"</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2010"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2019"</span> <span class="sc">~</span> <span class="st">"2010-2019 "</span>,</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(year, <span class="at">truncated =</span> 2L)) <span class="sc">%&gt;%</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(season <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(decade, season) <span class="sc">%&gt;%</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decade) <span class="sc">%&gt;%</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>((n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>), <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(season, pct) <span class="sc">%&gt;%</span> </span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Deacde =</span> decade, Winter, Spring, Summer, Autumn) <span class="sc">%&gt;%</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Winter =</span> <span class="fu">replace_na</span>(Winter, <span class="st">"-"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Spring =</span> <span class="fu">replace_na</span>(Spring, <span class="st">"-"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Summer =</span> <span class="fu">replace_na</span>(Summer, <span class="st">"-"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Autumn =</span> <span class="fu">replace_na</span>(Autumn, <span class="st">"-"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">dom =</span> <span class="st">'t'</span>,</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>                           <span class="at">pageLength =</span> <span class="fu">nrow</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-350d81d973ee4a4455f5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-350d81d973ee4a4455f5">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12"],["1900-1909","1910-1919","1920-1929","1930-1939","1940-1949","1950-1959","1960-1969","1970-1979","1980-1989","1990-1999","2000-2009","2010-2019 "],["-","-","10","-","-","-","0.6","0.6","11.6","4.9","1.8","0.9"],["-","100","60","64.7","71.4","57.7","61.9","52.6","34.1","36.1","49.9","52.1"],["25","-","10","20.6","28.6","6","0.6","-","1.5","1.2","1.1","0.3"],["75","-","20","14.7","-","36.3","36.9","46.8","52.7","57.8","47.2","46.7"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Deacde<\/th>\n      <th>Winter<\/th>\n      <th>Spring<\/th>\n      <th>Summer<\/th>\n      <th>Autumn<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","pageLength":12,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The rest of the charts focus on the <code>citizenship</code> variable which lists the country or countries of origin for the climbers. Only 10 out of the more than 76,500 expeditions do not have a country or countries listed for the climber. The charts do not include individuals with more than one country of citizenship listed.</p>
<p>First, I’m creating a custom theme (based on the bar chart above) that I’ll use in addition to <code>theme_linedraw()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>theme_him <span class="ot">&lt;-</span> <span class="fu">theme_linedraw</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="fl">0.28</span>, <span class="at">unit =</span> <span class="st">'cm'</span>), <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="sc">-</span><span class="dv">77</span>)),</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Commissioner"</span>),</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Do expeditions tend to happen during certain seasons?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, season, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(citizenship) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">sum</span>(n) <span class="sc">&gt;</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> <span class="co"># filter by countries with total climbers &gt; 500</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_country =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">season =</span> <span class="fu">factor</span>(season, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Winter"</span>, <span class="st">"Spring"</span>, <span class="st">"Summer"</span>, <span class="st">"Autumn"</span>, <span class="st">"Unknown"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">citizenship =</span> <span class="fu">fct_reorder</span>(citizenship, n_country)) <span class="sc">%&gt;%</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(citizenship, n, <span class="at">fill =</span> season)) <span class="sc">+</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#4e89ae"</span>, <span class="st">"#fe7171"</span>, <span class="st">"#f0a500"</span>, <span class="st">"#7ea04d"</span>, <span class="st">"#d2d3c9"</span>)) <span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Japan</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"In addition to higher than average winter trips,</span><span class="sc">\n</span><span class="st">climbers with Japanese citizenship make the</span><span class="sc">\n</span><span class="st">most summer trips."</span>,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">20.5</span>, <span class="at">y =</span> <span class="dv">8000</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#f0a500"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">21</span>, <span class="at">y =</span> <span class="dv">7700</span>, <span class="at">xend =</span> <span class="dv">21</span>, <span class="at">yend =</span> <span class="dv">6700</span>),</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#f0a500"</span>,</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># France</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"France has a disproportionately high</span><span class="sc">\n</span><span class="st">number of autumn expeditions."</span>,</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">18.65</span>, <span class="at">y =</span> <span class="dv">6100</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#7ea04d"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">19</span>, <span class="at">y =</span> <span class="dv">5900</span>, <span class="at">xend =</span> <span class="dv">19</span>, <span class="at">yend =</span> <span class="dv">4900</span>),</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#7ea04d"</span>,</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># South Korea</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"South Korea has a notably high number</span><span class="sc">\n</span><span class="st">(and proportion) of climbers involved</span><span class="sc">\n</span><span class="st">in winter expeditions, followed by fellow</span><span class="sc">\n</span><span class="st">Asian countries Japan and Nepal."</span>,</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">15.95</span>, <span class="at">y =</span> <span class="dv">4500</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#4e89ae"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">17</span>, <span class="at">y =</span> <span class="dv">4200</span>, <span class="at">xend =</span> <span class="dv">17</span>, <span class="at">yend =</span> <span class="dv">3200</span>),</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#4e89ae"</span>,</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># India</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"India stands out for its unusually</span><span class="sc">\n</span><span class="st">high proportion of climbers making the </span><span class="sc">\n</span><span class="st">trip in the spring, similar to Russia."</span>,</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">10.5</span>, <span class="at">y =</span> <span class="dv">3600</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#fe7171"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">11</span>, <span class="at">y =</span> <span class="dv">3275</span>, <span class="at">xend =</span> <span class="dv">11</span>, <span class="at">yend =</span> <span class="dv">2275</span>),</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#fe7171"</span>,</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>    theme_him <span class="sc">+</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Number of expeditions"</span>,</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Expeditions by Season and Country"</span>,</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Includes countries with more than 500 climbers"</span>,</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Source: #TidyTuesday | Himalayan Database"</span>) <span class="sc">+</span></span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While the earlier chart showed that overall, more expeditions occurred in the spring, breaking the data down by countries reveals distinctions, as noted above.</p>
</section>
<section id="trips-by-decades" class="level3">
<h3 class="anchored" data-anchor-id="trips-by-decades">Trips by decades</h3>
<p>The next bar chart visualizes the number of trips per 20-year time frames. While the majority of the countries with at least 500 climbers had the largest proportion of trips occur in 2000-2019, take a look at those that did not.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1900"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1919"</span> <span class="sc">~</span> <span class="st">"1900-1919"</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1920"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1939"</span> <span class="sc">~</span> <span class="st">"1920-1939"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1940"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1959"</span> <span class="sc">~</span> <span class="st">"1940-1959"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1960"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1979"</span> <span class="sc">~</span> <span class="st">"1960-1979"</span>,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1980"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1999"</span> <span class="sc">~</span> <span class="st">"1980-1999"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2000"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2019"</span> <span class="sc">~</span> <span class="st">"2000-2019"</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"NA"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, decade, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(citizenship) <span class="sc">%&gt;%</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">sum</span>(n) <span class="sc">&gt;</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_country =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">citizenship =</span> <span class="fu">fct_reorder</span>(citizenship, n_country)) <span class="sc">%&gt;%</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(citizenship, n, <span class="at">fill =</span> decade)) <span class="sc">+</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> PNWColors<span class="sc">::</span><span class="fu">pnw_palette</span>(<span class="at">name =</span> <span class="st">"Sailboat"</span>, <span class="at">n =</span> <span class="dv">6</span>, <span class="at">type =</span> <span class="st">"discrete"</span>)) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Japan</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"An unusually large number of Japanese</span><span class="sc">\n</span><span class="st">climbers made the trek in 1960-1979.</span><span class="sc">\n</span><span class="st">Japan also has the distinction of being</span><span class="sc">\n</span><span class="st">the only country here with more trips</span><span class="sc">\n</span><span class="st">made in 1980-1999 than in 2000-2019."</span>,</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">19.65</span>, <span class="at">y =</span> <span class="dv">8000</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#f0a500"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">21</span>, <span class="at">y =</span> <span class="dv">7700</span>, <span class="at">xend =</span> <span class="dv">21</span>, <span class="at">yend =</span> <span class="dv">6700</span>),</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#f0a500"</span>,</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># South Korea</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"Along with France, Spain and Switzerland,</span><span class="sc">\n</span><span class="st">South Korea has a comparable share of</span><span class="sc">\n</span><span class="st">climbers who made the trip in 1980-1999</span><span class="sc">\n</span><span class="st">and 2000-2019."</span>,</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="dv">16</span>, <span class="at">y =</span> <span class="dv">4500</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#E89C81"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">17</span>, <span class="at">y =</span> <span class="dv">4200</span>, <span class="at">xend =</span> <span class="dv">17</span>, <span class="at">yend =</span> <span class="dv">3200</span>),</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#E89C81"</span>,</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># China</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"China, and Nepal (for very different reasons),</span><span class="sc">\n</span><span class="st">have the largest proportions of trip made</span><span class="sc">\n</span><span class="st">in 2000-2019."</span>,</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">12.3</span>, <span class="at">y =</span> <span class="dv">3750</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#D2848D"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">13</span>, <span class="at">y =</span> <span class="dv">3500</span>, <span class="at">xend =</span> <span class="dv">13</span>, <span class="at">yend =</span> <span class="dv">2500</span>),</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#D2848D"</span>,</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>    theme_him <span class="sc">+</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Number of Expeditions"</span>,</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Expeditions by Decades and Country"</span>,</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Includes countries with more than 500 climbers"</span>,</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Source: #TidyTuesday | Himalayan Database"</span>) <span class="sc">+</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here are the specific percentages by decade. About half the trips recorded in the dataset occurred between 2000 and 2019.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="fu">case_when</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1900"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1909"</span> <span class="sc">~</span> <span class="st">"1900-1909"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1910"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1919"</span> <span class="sc">~</span> <span class="st">"1910-1919"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1920"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1929"</span> <span class="sc">~</span> <span class="st">"1920-1929"</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1930"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1939"</span> <span class="sc">~</span> <span class="st">"1930-1939"</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1940"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1949"</span> <span class="sc">~</span> <span class="st">"1940-1949"</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1950"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1959"</span> <span class="sc">~</span> <span class="st">"1950-1959"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1960"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1969"</span> <span class="sc">~</span> <span class="st">"1960-1969"</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1970"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1979"</span> <span class="sc">~</span> <span class="st">"1970-1979"</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1980"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1989"</span> <span class="sc">~</span> <span class="st">"1980-1989"</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"1990"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"1999"</span> <span class="sc">~</span> <span class="st">"1990-1999"</span>,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2000"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2009"</span> <span class="sc">~</span> <span class="st">"2000-2009"</span>,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">&gt;=</span> <span class="st">"2010"</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="st">"2019"</span> <span class="sc">~</span> <span class="st">"2010-2019"</span>,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"NA"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(decade, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digit=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   decade        n   pct
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
 1 2010-2019 24832  32.5
 2 2000-2009 21327  27.9
 3 1990-1999 13746  18  
 4 1980-1989 10371  13.6
 5 1970-1979  3709   4.8
 6 1960-1969  1161   1.5
 7 1950-1959   953   1.2
 8 1930-1939   266   0.3
 9 1920-1929    70   0.1
10 1940-1949    68   0.1
11 1900-1909    13   0  
12 1910-1919     3   0  </code></pre>
</div>
</div>
</section>
<section id="age-factor" class="level3">
<h3 class="anchored" data-anchor-id="age-factor">Age factor</h3>
<p>Asian countries continue to divert from the overall trends of the group of countries, particularly in the case of climber age. Missing values, which for the age variable make up about 4.6%, have been excluded from the chart. Unsurprisingly, the 25-34 and 35-44 age groups make up the largest proportions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">case_when</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;=</span> <span class="st">"17"</span> <span class="sc">~</span> <span class="st">"Under 18"</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"18"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"24"</span> <span class="sc">~</span> <span class="st">"18-24"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"25"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"34"</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"35"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"44"</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"45"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"54"</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"55"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"64"</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"65"</span> <span class="sc">~</span> <span class="st">"65+"</span>,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, age_range, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(citizenship) <span class="sc">%&gt;%</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">sum</span>(n) <span class="sc">&gt;</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_country =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">factor</span>(age_range, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Under 18"</span>, <span class="st">"18-24"</span>, <span class="st">"25-34"</span>, <span class="st">"35-44"</span>, <span class="st">"45-54"</span>, <span class="st">"55-64"</span>, <span class="st">"65+"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">citizenship =</span> <span class="fu">fct_reorder</span>(citizenship, n_country)) <span class="sc">%&gt;%</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(citizenship, n, <span class="at">fill =</span> age_range)) <span class="sc">+</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    paletteer<span class="sc">::</span><span class="fu">scale_fill_paletteer_d</span>(<span class="st">"awtools::a_palette"</span>, <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Japan</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"Japanese make up the majority</span><span class="sc">\n</span><span class="st">of climbers 65+"</span>,</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">20.7</span>, <span class="at">y =</span> <span class="dv">7800</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#E74A60"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">21</span>, <span class="at">y =</span> <span class="dv">7500</span>, <span class="at">xend =</span> <span class="dv">21</span>, <span class="at">yend =</span> <span class="dv">6500</span>),</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#E74A60"</span>,</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># India</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">label =</span> <span class="st">"India, along with fellow Asian countries</span><span class="sc">\n</span><span class="st">China, South Korea, Japan and Nepal,</span><span class="sc">\n</span><span class="st">have a noticeably higher proportion of</span><span class="sc">\n</span><span class="st">climbers 18-24 years of age"</span>,</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fl">9.9</span>, <span class="at">y =</span> <span class="dv">3300</span>, <span class="at">size =</span> <span class="fl">3.25</span>, <span class="at">color =</span> <span class="st">"#2B363C"</span>, <span class="at">family=</span><span class="st">"Commissioner"</span>, <span class="at">hjust =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">11</span>, <span class="at">y =</span> <span class="dv">3000</span>, <span class="at">xend =</span> <span class="dv">11</span>, <span class="at">yend =</span> <span class="dv">2000</span>),</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.45</span>, <span class="at">color =</span> <span class="st">"#2B363C"</span>,</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>                 <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">1.5</span>, <span class="st">"mm"</span>))) <span class="sc">+</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>    theme_him <span class="sc">+</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Number of expeditions"</span>,</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Expeditions by Age Group and Country"</span>,</span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Includes countries with more than 500 climbers"</span>,</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Source: #TidyTuesday | Himalayan Database"</span>) <span class="sc">+</span></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Given the age distinction with Japan, out of all of the country’s climbers, how many, percentage-wise, are older than 65? 6% (To put the number in perspective, the table includes countries with percentages &gt; 1 and number of expeditions &gt; 9. )</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">case_when</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;=</span> <span class="st">"17"</span> <span class="sc">~</span> <span class="st">"Under 18"</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"18"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"24"</span> <span class="sc">~</span> <span class="st">"18-24"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"25"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"34"</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"35"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"44"</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"45"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"54"</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"55"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"64"</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"65"</span> <span class="sc">~</span> <span class="st">"65+"</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, age_range, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(citizenship) <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">==</span> <span class="st">"65+"</span> <span class="sc">&amp;</span> pct <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> n <span class="sc">&gt;</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>age_range)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  citizenship     n   pct
  &lt;chr&gt;       &lt;int&gt; &lt;dbl&gt;
1 Japan         342     6
2 USA           110     2
3 France         69     2
4 Germany        48     2
5 Russia         23     2
6 Slovenia       11     2</code></pre>
</div>
</div>
<hr>
<p>Framed another way, what percentage of all climbers older than 65 are Japanese? 38.7% (The table includes the countries with the 10 highest percentages.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;=</span> <span class="st">"17"</span> <span class="sc">~</span> <span class="st">"Under 18"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"18"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"24"</span> <span class="sc">~</span> <span class="st">"18-24"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"25"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"34"</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"35"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"44"</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"45"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"54"</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"55"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"64"</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"65"</span> <span class="sc">~</span> <span class="st">"65+"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, age_range, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">==</span> <span class="st">"65+"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_65 =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits=</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>age_range) <span class="sc">%&gt;%</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   citizenship     n pct_65
   &lt;chr&gt;       &lt;int&gt;  &lt;dbl&gt;
 1 Japan         342   38.7
 2 USA           110   12.4
 3 France         69    7.8
 4 Germany        48    5.4
 5 UK             48    5.4
 6 Italy          33    3.7
 7 Austria        28    3.2
 8 Spain          28    3.2
 9 Russia         23    2.6
10 Switzerland    22    2.5</code></pre>
</div>
</div>
<hr>
<p>On the other end of the age spectrum, what percentage of climbers 18-24 years of age come from Asian countries? 66% (The table includes only countries where 18-24 year olds make up at least 1% of climbers.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">case_when</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;=</span> <span class="st">"17"</span> <span class="sc">~</span> <span class="st">"Under 18"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"18"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"24"</span> <span class="sc">~</span> <span class="st">"18-24"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"25"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"34"</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"35"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"44"</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"45"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"54"</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"55"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"64"</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"65"</span> <span class="sc">~</span> <span class="st">"65+"</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, age_range, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">==</span> <span class="st">"18-24"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_1824 =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(citizenship <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Bangladesh"</span>, <span class="st">"Bhutan"</span>, <span class="st">"China"</span>, <span class="st">"India"</span>, <span class="st">"Indonesia"</span>, <span class="st">"Iran"</span>, <span class="st">"Israel"</span>, <span class="st">"Japan"</span>, <span class="st">"Kazakhstan"</span>, <span class="st">"Kuwait"</span>, <span class="st">"Malaysia"</span>, <span class="st">"Nepal"</span>, <span class="st">"Pakistan"</span>, <span class="st">"S Korea"</span>, <span class="st">"Singapore"</span>, <span class="st">"Taiwan"</span>, <span class="st">"Uzbekistan"</span>, <span class="st">"Vietnam"</span>) <span class="sc">&amp;</span> pct_1824 <span class="sc">&gt;=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>age_range)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  citizenship     n pct_1824
  &lt;chr&gt;       &lt;int&gt;    &lt;dbl&gt;
1 Nepal        1956       34
2 Japan         761       13
3 S Korea       388        7
4 China         378        7
5 India         231        4
6 Iran           32        1</code></pre>
</div>
</div>
<hr>
<p>Are Asian countries indeed the ones with the highest percentages of climbers 18-24 years of age? Yes, China leads the list with 20% of its climbers within the age group, while Slovenia is the only non-Asian country in which the age group makes up a double-digit percentage, at 11%. Countries with trips numbering fewer than 10 have been removed from the list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;=</span> <span class="st">"17"</span> <span class="sc">~</span> <span class="st">"Under 18"</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"18"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"24"</span> <span class="sc">~</span> <span class="st">"18-24"</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"25"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"34"</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"35"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"44"</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"45"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"54"</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"55"</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"64"</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="st">"65"</span> <span class="sc">~</span> <span class="st">"65+"</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, age_range, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(citizenship) <span class="sc">%&gt;%</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">==</span> <span class="st">"18-24"</span> <span class="sc">&amp;</span> n <span class="sc">&gt;</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>age_range) <span class="sc">%&gt;%</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   citizenship     n   pct
   &lt;chr&gt;       &lt;int&gt; &lt;dbl&gt;
 1 Indonesia      27    31
 2 China         378    20
 3 Malaysia       22    16
 4 Yugoslavia     75    15
 5 Nepal        1956    14
 6 S Korea       388    13
 7 India         231    13
 8 Japan         761    12
 9 Slovenia       64    11
10 Iran           32    10</code></pre>
</div>
</div>
<hr>
<p>How many climbers in the dataset are under 18? Out of 76,519 expeditions, 124 of them were undertaken teenagers, while two are even younger at the age of 7 (Italian, 1984) and 12 (Nepalese, 1984). See the breakdown by age group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>members <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_range =</span> <span class="fu">case_when</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;=</span> <span class="dv">17</span> <span class="sc">~</span> <span class="st">"Under 18"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"24"</span> <span class="sc">~</span> <span class="st">"18-24"</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">25</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"34"</span> <span class="sc">~</span> <span class="st">"25-34"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"44"</span> <span class="sc">~</span> <span class="st">"35-44"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">45</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"54"</span> <span class="sc">~</span> <span class="st">"45-54"</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">55</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="st">"64"</span> <span class="sc">~</span> <span class="st">"55-64"</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"65+"</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Unknown"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_range <span class="sc">!=</span> <span class="st">"Unknown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_range, <span class="at">sort=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  age_range     n    pct
  &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
1 25-34     27199 37.2  
2 35-44     22778 31.2  
3 45-54     11963 16.4  
4 18-24      5804  7.95 
5 55-64      4269  5.85 
6 65+         883  1.21 
7 Under 18    126  0.173</code></pre>
</div>
</div>
</section>
<section id="women-climbers" class="level3">
<h3 class="anchored" data-anchor-id="women-climbers">Women Climbers</h3>
<p>The final visualization looks at the percentage of expeditions taken by women, by country while also giving an overview of the countries (that have had women climbers) represented in the dataset.</p>
<p>This code sets up a world map base layer using the <code>rnaturalearth</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>world_map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale=</span><span class="st">"medium"</span>,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">type=</span><span class="st">"countries"</span>,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">returnclass=</span><span class="st">"sf"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>world_map, <span class="at">size=</span><span class="fl">0.25</span>, <span class="at">fill=</span><span class="st">"#fafafa"</span>) <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The following produces a dataframe showing the percentage of expeditions by women, based on country. Only countries with at least 10 women are included. I’ll join this subset with the map data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>expeditions_women <span class="ot">&lt;-</span> members <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">ifelse</span>(sex <span class="sc">==</span> <span class="st">"F"</span>, <span class="st">"Women"</span>, <span class="st">"Men"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">!=</span> <span class="st">"NA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(citizenship, sex) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(citizenship) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> <span class="fu">round</span>(n<span class="sc">/</span><span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">factor</span>(sex, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Men"</span>, <span class="st">"Women"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">"Women"</span> <span class="sc">&amp;</span> n <span class="sc">&gt;</span> <span class="dv">9</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">str_detect</span>(citizenship, <span class="st">"/"</span>)) <span class="co"># remove dual-country citizenship</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now checking for which country names do not match and thus have to be edited in the <code>expeditions_women</code> dataframe, using <code>setdiff()</code>. This line asks: What country names in the citizenship column of the subset <em>are not</em> in the country names in the map data?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(expeditions_women<span class="sc">$</span>citizenship, world_map<span class="sc">$</span>geounit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Czechoslovakia" "S Africa"       "S Korea"        "UK"            
[5] "USA"            "W Germany"      "Yugoslavia"    </code></pre>
</div>
</div>
<p>Based on the results, I’m removing the country names that no longer exist and renaming the rest.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>expeditions_women <span class="ot">&lt;-</span> expeditions_women <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># removing country names that no longer exist</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(citizenship, <span class="st">"Czechoslovakia|USSR|W Germany|Yugoslavia"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># renaming countries</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">citizenship =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    citizenship,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Bosnia-Herzegovina"</span> <span class="ot">=</span> <span class="st">"Bosnia and Herzegovina"</span>,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"S Africa"</span> <span class="ot">=</span> <span class="st">"South Africa"</span>,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"S Korea"</span> <span class="ot">=</span> <span class="st">"South Korea"</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Serbia"</span> <span class="ot">=</span> <span class="st">"Republic of Serbia"</span>,</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"UK"</span> <span class="ot">=</span> <span class="st">"United Kingdom"</span>,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"USA"</span> <span class="ot">=</span> <span class="st">"United States of America"</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="co"># check &gt; should have no results</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(expeditions_women<span class="sc">$</span>citizenship, world_map<span class="sc">$</span>geounit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<p>Here is a table of the final 49 countries, sorted by the percentage of expeditions involving women.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>expeditions_women <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pct)) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>sex) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Citizenship=</span>citizenship, <span class="st">`</span><span class="at"># of expeditions, women</span><span class="st">`</span><span class="ot">=</span>n, <span class="st">`</span><span class="at">% of all expeditions</span><span class="st">`</span><span class="ot">=</span>pct) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-931a820f5317cb06d778" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-931a820f5317cb06d778">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49"],["Kosovo","Guatemala","Croatia","Andorra","Lithuania","Finland","Norway","Brazil","Singapore","Taiwan","France","Mexico","Switzerland","Canada","Sweden","Germany","Hungary","Iran","Poland","Australia","Belgium","China","Indonesia","South Africa","United States of America","India","Netherlands","Austria","Chile","Ecuador","Ireland","Japan","New Zealand","Czech Republic","Denmark","Russia","United Kingdom","Bulgaria","Greece","Italy","Romania","Spain","Kazakhstan","Argentina","Slovenia","Ukraine","South Korea","Slovakia","Nepal"],[10,10,37,11,15,44,127,32,23,19,744,46,381,171,55,378,21,46,200,191,60,291,12,22,806,247,93,220,20,12,23,639,79,60,18,123,492,19,13,220,15,273,10,14,32,21,147,10,178],[83,71,37,35,28,24,22,19,18,18,16,16,16,15,15,14,14,14,14,13,13,13,13,13,13,12,12,10,10,10,10,10,10,9,9,9,9,8,8,8,8,8,7,6,6,6,5,5,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Citizenship<\/th>\n      <th># of expeditions, women<\/th>\n      <th>% of all expeditions<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>With the exception of Norway, the countries where women make up more than 20% of the expeditions have relatively low numbers, with the number of women under 50. Most of them also happen to be small countries, area-wise, so they are not immediately visible on the map. Instead, you see swaths of yellow with subtle variations, signifying percentages of expeditions with women in the teens or lower.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join map layer with countries in Himalayan dataset</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>expeditions_women_maplayer <span class="ot">&lt;-</span> world_map <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(expeditions_women, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"geounit"</span><span class="ot">=</span><span class="st">"citizenship"</span>))</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>world_map, <span class="at">size=</span><span class="fl">0.25</span>, <span class="at">color=</span><span class="st">"#888888"</span>, <span class="at">fill=</span><span class="st">"#f9f9f9"</span>) <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>expeditions_women_maplayer, <span class="at">size=</span><span class="fl">0.25</span>, <span class="at">color=</span><span class="st">"#888888"</span>, <span class="fu">aes</span>(<span class="at">fill=</span>pct)) <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#ffff3f"</span>, <span class="at">high =</span> <span class="st">"#007f5f"</span>) <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"center"</span>,</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Commissioner"</span>),</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.spacing.x =</span> <span class="fu">unit</span>(<span class="fl">0.4</span>, <span class="st">'cm'</span>)) <span class="sc">+</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">title.vjust =</span> <span class="fl">0.75</span>, <span class="at">barheight =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">"% of Women"</span>,</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"Expeditions Undertaken by Women"</span>,</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Includes countries with at least 10 expeditions by women</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Source: #TidyTuesday | Himalayan Database"</span>)</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="co"># completely fill background with specified page color (eliminating white bands as happened when only running the plot)</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a><span class="co"># https://gis.stackexchange.com/questions/269224/ggplot2-map-with-colored-background-and-coord-map</span></span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">ggdraw</span>(map) <span class="sc">+</span> </span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A larger map would improve the visibility of the smaller countries but given the format constraints of this page, I’ll try grouping the percentages and using more distinct colors for the ramp.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># range of % values</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>expeditions_women <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> citizenship           sex           n              pct       
 Length:49          Men  : 0   Min.   : 10.0   Min.   : 1.00  
 Class :character   Women:49   1st Qu.: 19.0   1st Qu.: 9.00  
 Mode  :character              Median : 46.0   Median :13.00  
                               Mean   :137.3   Mean   :15.57  
                               3rd Qu.:191.0   3rd Qu.:16.00  
                               Max.   :806.0   Max.   :83.00  </code></pre>
</div>
</div>
<p>Percentages run from 1-83 but was is the distribution (in order to know the which percentage groups to make)?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>expeditions_women <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>pct)) <span class="sc">+</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">stat=</span><span class="st">"count"</span>, <span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">fill=</span><span class="st">"#333C83"</span>) <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    theme_him</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in geom_histogram(stat = "count", alpha = 0.8, fill = "#333C83"):
Ignoring unknown parameters: `binwidth`, `bins`, and `pad`</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>With most of the percentages clustered under 20, I’ll create the groups as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>exp_women_v2 <span class="ot">&lt;-</span> expeditions_women <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    pct <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">"1-10"</span>,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    pct <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> pct <span class="sc">&lt;=</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"11-20"</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    pct <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"More than 20"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># to set order for colors</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_group =</span> <span class="fu">factor</span>(pct_group, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"1-10"</span>, <span class="st">"11-20"</span>, <span class="st">"More than 20"</span>)))</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>exp_women_v2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 × 5
   citizenship sex       n   pct pct_group   
   &lt;chr&gt;       &lt;fct&gt; &lt;int&gt; &lt;dbl&gt; &lt;fct&gt;       
 1 Andorra     Women    11    35 More than 20
 2 Argentina   Women    14     6 1-10        
 3 Australia   Women   191    13 11-20       
 4 Austria     Women   220    10 1-10        
 5 Belgium     Women    60    13 11-20       
 6 Brazil      Women    32    19 11-20       
 7 Bulgaria    Women    19     8 1-10        
 8 Canada      Women   171    15 11-20       
 9 Chile       Women    20    10 1-10        
10 China       Women   291    13 11-20       
# … with 39 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>exp_women_maplayer_v2 <span class="ot">&lt;-</span> world_map <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(exp_women_v2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"geounit"</span><span class="ot">=</span><span class="st">"citizenship"</span>))</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>map_v2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>world_map, <span class="at">size=</span><span class="fl">0.25</span>, <span class="at">color=</span><span class="st">"#888888"</span>, <span class="at">fill=</span><span class="st">"#f9f9f9"</span>) <span class="sc">+</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>exp_women_maplayer_v2, <span class="at">size=</span><span class="fl">0.15</span>, <span class="at">color=</span><span class="st">"#888888"</span>, <span class="at">alpha=</span><span class="fl">0.7</span>, <span class="fu">aes</span>(<span class="at">fill=</span>pct_group)) <span class="sc">+</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"#fcbf49"</span>, <span class="st">"#f77f00"</span>, <span class="st">"#d62828"</span>)) <span class="sc">+</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold"</span>),</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"top"</span>, </span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r=</span><span class="fl">0.25</span>, <span class="at">unit=</span><span class="st">"cm"</span>), <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"Commissioner"</span>),</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.margin =</span> <span class="fu">margin</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="sc">-</span><span class="dv">2</span>))</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">#legend.spacing.x = unit(0.25, 'cm')</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="cn">NULL</span>,</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="st">"% of Expeditions Undertaken by Women"</span>,</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Includes countries with at least 10 expeditions by women</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Source: #TidyTuesday | Himalayan Database"</span>)</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a><span class="co"># completely fill background with specified page color (eliminating white bands as happened when only running the plot)</span></span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a><span class="co"># https://gis.stackexchange.com/questions/269224/ggplot2-map-with-colored-background-and-coord-map</span></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">ggdraw</span>(map_v2) <span class="sc">+</span> </span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"#fff7f5"</span>, <span class="at">color =</span> <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Made with <a href="https://quarto.org/">Quarto</a></div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:chejenj@gmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>